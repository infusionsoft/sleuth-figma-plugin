<html>
<head>
  <link rel="stylesheet" href="../../node_modules/figma-plugin-ds/dist/figma-plugin-ds.css">
</head>

<h2>Sleuth</h2>
<div><p id="percentageCoverage">100%</p></div>
<button id="Run">Run</button>
<button id="cancel">Cancel</button>
<script>
var badLayers = {};

parent.onmessage(function(msg){
  if ( msg.type === "doneLoading"){
    badLayers = msg.badLayers;
  }
  document.getElementById('percentCoverage').innerHTML(msg.layersReferencingRemoteAnyStyles/msg.layers);
})

document.getElementById('run').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'Sleuth-Count' } }, '*')
}

document.getElementById('select').onclick = () => {
  ids = []; // Get selected rows here
  parent.postMessage({ pluginMessage: { type: 'Sleuth-Select', ids } }, '*')
}

document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}

</script>
</html>